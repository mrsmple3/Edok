# Document Filter Component

Компонент для фильтрации документов по различным критериям.

## Расположение

`/components/document/Filter.vue`

## Возможности фильтрации

### ✅ Реализованные фильтры:

1. **Дата створення** - фильтр по дате создания документа (диапазон)
2. **Контрагент** - выбор конкретного контрагента из списка
3. **ЕДРПОУ поставщика** - поиск по ЕДРПОУ поставщика (текстовое поле)
4. **Дата документа** - фильтр по дате самого документа (диапазон)
5. **Номер документа** - поиск по номеру документа (текстовое поле)
6. **Назва документа** - поиск по названию документа (текстовое поле)

## Использование

### Интерфейс фильтра

```vue
<Filter :counterparties="counterpartiesList" />
```

### Структура фильтров

```typescript
const filters = {
	dateRange: DateRange | null, // Диапазон дат создания
	documentDateRange: DateRange | null, // Диапазон дат документа
	counterparty: any, // Выбранный контрагент
	edrpou: string, // ЕДРПОУ поставщика
	documentNumber: string, // Номер документа
	documentTitle: string, // Название документа
};
```

## Логика фильтрации

### Дата создания

- Фильтрует по полю `doc.createdAt`
- Поддерживает диапазон дат (от и до)
- Время устанавливается: начало дня (00:00:00) - конец дня (23:59:59)

### Дата документа

- Фильтрует по полю `doc.documentDate` или `doc.createdAt` если первое отсутствует
- Отдельный календарь для выбора диапазона
- По умолчанию: последние 30 дней

### Контрагент

- Выбор из выпадающего списка (Combobox)
- Сравнивает с `doc.counterpartyId`
- Поддерживает поиск по названию организации

### ЕДРПОУ поставщика

- Текстовый поиск (нечувствительный к регистру)
- Ищет в полях: `doc.supplier?.edrpou`, `doc.counterparty?.edrpou`
- Поддерживает частичное совпадение

### Номер документа

- Текстовый поиск (нечувствительный к регистру)
- Ищет в полях: `doc.number`, `doc.documentNumber`
- Поддерживает частичное совпадение

### Название документа

- Текстовый поиск (нечувствительный к регистру)
- Ищет в полях: `doc.title`, `doc.name`
- Поддерживает частичное совпадение

## Функциональность

### Применение фильтров

```typescript
const applyFilters = () => {
	// Фильтрует adminStore.$state.documents
	// Результат сохраняется в adminStore.$state.filteredDocuments
};
```

### Сброс фильтров

```typescript
const resetFilters = () => {
	// Очищает все фильтры
	// Восстанавливает исходный список документов
	// Сбрасывает календари к значениям по умолчанию
};
```

## Интеграция с Store

Компонент работает с `adminStore`:

- Читает документы из `adminStore.$state.documents`
- Сохраняет результат в `adminStore.$state.filteredDocuments`
- Логирует результаты фильтрации в консоль

## UI/UX особенности

- **Диалоговое окно** - фильтр открывается в модальном окне
- **Иконка фильтра** - Badge с иконкой для открытия
- **Два календаря** - отдельные календари для даты создания и даты документа
- **Кнопки управления**:
  - "Застосувати" - применить фильтры и закрыть диалог
  - "Скинути" - сбросить все фильтры и закрыть диалог

## Стилизация

```scss
.filter-badge {
	width: 48px;
	height: 48px;
	border-radius: 15px;
}

.combobox-input {
	padding-left: 36px;
}

.check-icon {
	height: 16px;
	width: 16px;
}

.reset-icon {
	width: 20px;
	height: 20px;
}
```

## Примеры данных документа

Фильтр ожидает документы с такой структурой:

```typescript
interface Document {
	id: number;
	createdAt: string;
	documentDate?: string;
	counterpartyId: number;
	title?: string;
	name?: string;
	number?: string;
	documentNumber?: string;
	supplier?: {
		edrpou: string;
	};
	counterparty?: {
		edrpou: string;
	};
}
```

## Отладка

Все операции фильтрации логируются в консоль:

- Примененные фильтры
- Количество документов до и после фильтрации
- Сброс фильтров

```javascript
console.log("Применены фильтры:", {
	dateRange,
	documentDateRange,
	counterparty,
	edrpou,
	documentNumber,
	documentTitle,
	totalDocuments: 100,
	filteredDocuments: 25,
});
```
